{"version":3,"sources":["uni-app:///main.js","webpack:////Users/liaowenbin/iCollections/Project/baidu/1futureEmail/uniapp/futureEmail/pages/writeemail/writeemail.vue?fbd5","webpack:////Users/liaowenbin/iCollections/Project/baidu/1futureEmail/uniapp/futureEmail/pages/writeemail/writeemail.vue?4a48","webpack:////Users/liaowenbin/iCollections/Project/baidu/1futureEmail/uniapp/futureEmail/pages/writeemail/writeemail.vue?a932","webpack:////Users/liaowenbin/iCollections/Project/baidu/1futureEmail/uniapp/futureEmail/pages/writeemail/writeemail.vue?637f","uni-app:///pages/writeemail/writeemail.vue","webpack:////Users/liaowenbin/iCollections/Project/baidu/1futureEmail/uniapp/futureEmail/pages/writeemail/writeemail.vue?b165","webpack:////Users/liaowenbin/iCollections/Project/baidu/1futureEmail/uniapp/futureEmail/pages/writeemail/writeemail.vue?10b5"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,2G,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,mBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACc;;;AAGvE;AACyN;AACzN,gBAAgB,iNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mMAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAq3B,CAAgB,wyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2Dz4B;AACA,MADA,kBACA;;AAEA;AACA;AACA,gCADA;AAEA,mBAFA;AAGA,4BAHA;AAIA,cAJA;;;AAOA;AACA;AACA,gCADA;AAEA,mBAFA;AAGA,4BAHA;AAIA,cAJA;;;AAOA;AACA;AACA,gCADA;AAEA,mBAFA;AAGA,4BAHA;AAIA,cAJA;;;AAOA;AACA,0BADA;AAEA,gCAFA,EAEA;AACA,qBAHA,EAGA;AACA,8BAJA,EAIA;AACA,sBALA,EAKA;AACA,sBANA,EAMA;AACA,8BAPA,EAOA;AACA,sBARA,EAQA;AACA,2BATA;AAUA,sBAVA;AAWA,oBAXA,EAWA;AACA;AACA,yBAbA;;AAeA,uBAfA,EAeA;AACA,sBAhBA;AAiBA;AACA,oBAlBA;AAmBA,mBAnBA;;AAqBA;AACA,iBAtBA;AAuBA,kBAvBA;AAwBA,gBAxBA;;AA0BA;AACA,kBA3BA;;AA6BA;AACA,oBA9BA;AA+BA,sBA/BA;;AAiCA;AACA,4BAlCA;;AAoCA,GA/DA;AAgEA;AACA;AACA;AACA;;AAEA;AACA,sBADA;;;AAIA;AACA;AACA,+CADA;AAEA;AACA,+BADA;AAEA,iCAFA;AAGA,4BAHA;AAIA,+CAJA,EAFA;;AAQA,sBARA;AASA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,4DADA;AAEA,kEAFA;AAGA,kCAHA,EAGA;AACA;AACA,6CADA;AAEA,+CAFA;AAGA,8DAHA;AAIA,uEAJA,EAJA;;AAUA;AACA;AACA;AACA;AACA,yBAFA,MAEA;AACA;AACA;AACA;AACA,uBAlBA;AAmBA,0BAnBA,kBAmBA;AACA;AACA;AACA,uBAtBA;;AAwBA;AACA;;AAEA;AACA;AACA;AACA,iBAFA,EAEA,SAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,iBALA,EAKA,GALA;AAMA,eA1CA;;AA4CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCADA;;AAGA;;AAEA;AANA,qBAOA;AACA;AACA,gIADA;;AAGA;;;AAGA,eApBA,EAoBA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA,8BAFA;AAGA,gCAHA;AAIA,kCAJA;;AAMA;AACA;AACA,eAhCA;AAiCA,aA/EA,EA+EA,EA/EA;;;AAkFA;AACA;AAlGA,eAmGA;AACA;AACA;AACA;AACA,8BADA;AAEA,0BAFA;AAGA,4BAHA;AAIA,8BAJA;;AAMA;;AAEA,SA1HA;AA2HA,YA3HA,kBA2HA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,sBAFA;AAGA,wBAHA;AAIA,0BAJA;;AAMA,SArIA;;;AAwIA,KAlJA;;;AAqJA;AACA;AACA;AACA;AACA,iJADA;;AAGA;AACA;;;AAGA;AACA;AACA,KAjKA;;AAmKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EADA;;AAGA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AAzCA,aA0CA;AACA;AACA;AACA,sBADA;AAEA,qBAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA,iCADA,IACA,iBADA,IACA,kBADA,IACA,iBADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CADA;AAEA,sCAFA;AAGA,6BAHA,mBAGA,CAHA,EAGA;AACA;AACA,uBALA;;AAOA,mBAXA,MAWA;AACA;AACA;AACA,iBAnBA,MAmBA;AACA;AACA,mCADA;AAEA,8BAFA;AAGA,gCAHA;AAIA,kCAJA;;AAMA;AACA,eAjCA;;AAmCA;AACA;;AAEA;AArFA,WAsFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAdA,CAcA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AA7BA,aA8BA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA,eAkCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAnXA;AAoXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAFA,MAEA;AACA;AACA;AACA;AACA,eAfA,IAJA;;AAqBA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAvZA;;AAyZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvcA;;AAycA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAtdA;;AAwdA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,sCALA,CAKA;AACA,wCANA,CAMA;AACA,iCAPA,CAOA;AACA,kFARA,CAQA;AACA,0FATA,CASA;AACA,0FAVA,CAUA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBADA;AAEA,kBAFA;AAGA,sBAHA;AAIA,sBAJA;AAKA,qBALA;AAMA,yBANA;AAOA,0BAPA;AAQA,sBARA;AASA,wBATA;AAUA,wBAVA;;;AAaA;AACA;;AAEA;AACA;AACA,SAFA,EAEA,IAFA;;AAIA;AACA,KArgBA;;AAugBA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCALA,CAKA;AACA,wCANA,CAMA;AACA,iCAPA,CAOA;AACA,kFARA,CAQA;AACA,0FATA,CASA;AACA,0FAVA,CAUA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBADA;AAEA,kBAFA;AAGA,yBAHA;AAIA,sBAJA;AAKA,qBALA;AAMA,yBANA;AAOA,0BAPA;AAQA,sBARA;AASA,wBATA;AAUA,wBAVA;;;AAaA;AACA;;AAEA;AACA;AACA,SAFA,EAEA,IAFA;;AAIA;AACA,KAnjBA;;AAqjBA;AACA;AACA;;AAEA;AACA,gEADA;AAEA,eAFA,mBAEA,GAFA,EAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,4BAFA;AAGA,0BAHA;;AAKA,aAPA,MAOA;AACA;AACA,6BADA;AAEA,mCAFA;AAGA,uBAHA,mBAGA,GAHA,EAGA;AACA;AACA;AACA;AACA,iBAPA;;;AAUA;AACA,WArBA,MAqBA;AACA;AACA,8BADA;AAEA,wBAFA;AAGA,0BAHA;AAIA,4BAJA;;AAMA;AACA,SAlCA;;;AAqCA;AACA,KA/lBA,EAhEA;;;AAkqBA,QAlqBA,kBAkqBA,IAlqBA,EAkqBA;AACA;AACA,kBADA;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CADA;AAEA;AACA,6BADA;AAEA,+BAFA,EAFA;;AAMA,oBANA;AAOA,aAPA,mBAOA,GAPA,EAOA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAFA,EAEA,SAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,aANA,EAMA,IANA,EANA,CAYA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBADA;AAEA,uBAFA;AAGA,4BAHA;AAIA,4BAJA;AAKA,2BALA;AAMA,+BANA;AAOA,gCAPA;AAQA,4BARA;AASA,8BATA;AAUA,8BAVA;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA,eAFA,MAEA;AACA;AACA,eAFA,MAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eANA,MAMA;AACA;AACA;;AAEA;AACA;AACA;AACA,oDADA;AAEA,2BAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA,qBANA;AAOA,wBAPA,kBAOA;AACA;AACA;AACA;AACA,4DADA;AAEA;AACA,+CADA;AAEA,iDAFA;AAGA,+CAHA;AAIA,2DAJA,EAFA;;AAQA,+BARA,mBAQA,GARA,EAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,0DADA;AAEA,qCAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wEADA;AAEA;AACA,yDADA;AAEA,2DAFA;AAGA,yDAHA;AAIA,oEAJA,EAFA;;AAQA,gDARA;AASA,yCATA,mBASA,GATA,EASA;AACA;AACA,mCAXA;AAYA,sCAZA,gBAYA,CAZA,EAYA;AACA;AACA,mCAdA;;;AAiBA,+BA3BA;AA4BA,kCA5BA,gBA4BA,CA5BA,EA4BA;AACA;AACA;;AAEA;AACA,+BAjCA;;AAmCA;AACA,yBAxDA;AAyDA,4BAzDA,gBAyDA,CAzDA,EAyDA;AACA;AACA,yBA3DA;;AA6DA,qBAvEA;;;AA0EA,iBA5EA,MA4EA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAxHA;;;AA2HA,WA/IA;;AAiJA;AACA;;AAEA;AACA;AACA;;AAEA,WAPA,EAOA;AACA;AACA;AACA;AACA,4BADA;AAEA,wBAFA;AAGA,0BAHA;AAIA,4BAJA;;AAMA,WAhBA;;AAkBA;;AAEA,OAvLA;AAwLA,UAxLA,kBAwLA;AACA;AACA,OA1LA;;;;;AA+LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GA34BA,E;;;;;;;;;;;;;AC3DA;AAAA;AAAA;AAAA;AAAwnD,CAAgB,u6CAAG,EAAC,C;;;;;;;;;;;ACA5oD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/writeemail/writeemail.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/writeemail/writeemail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./writeemail.vue?vue&type=template&id=67ab5b26&\"\nvar renderjs\nimport script from \"./writeemail.vue?vue&type=script&lang=js&\"\nexport * from \"./writeemail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./writeemail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/writeemail/writeemail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./writeemail.vue?vue&type=template&id=67ab5b26&\"","var components\ntry {\n  components = {\n    EmailBlock: function() {\n      return import(\n        /* webpackChunkName: \"components/EmailBlock/EmailBlock\" */ \"@/components/EmailBlock/EmailBlock.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./writeemail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./writeemail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<scroll-view class=\"writeemail\">\n\t\t<!-- 背景 -->\n\t\t<view class=\"bg\" @click.stop=\"whiteClick\"></view> \n\t\t\n\t\t<!-- 自定义导航栏 -->\n\t\t<view class=\"back-btn iconarrow_btn_left\">\n\t\t\t\t\t<text class=\"nav-title\">{{biaoti}}</text>\n\t\t\t\t\t<text class=\"iconfont buttonReturn\" @click.stop=\"returnIndex\">&#xe62f;</text>\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 模块 -->\r\n\t\t<view scroll-y=\"true\">\n\t\t\t<view class=\"whiteBlock\" v-show=\"whiteNumber>=1\" @click=\"whiteClick\"></view>\n\t\t\t\r\n\t\t\t<view>\r\n\t\t\t\t<EmailBlock v-for=\"item in blockObjectList\" :ref=\"item.ref\" :key=\"item.id\" :blockType=\"item.type\"\r\n\t\t\t\t\t@click.native=\"editFunction\" :BlockContent='item.content' :blockclickclock=\"blockclickclock\"></EmailBlock>\r\n\t\t\t</view>\r\n\t\t\t<!-- 空白区域 -->\r\n\t\t\t<view class=\"whiteBlock\" v-show=\"whiteNumber>=2\" @click=\"whiteClick\"></view>\r\n\t\t\t<view class=\"whiteBlock\" v-show=\"whiteNumber>=3\" @click=\"whiteClick\"></view>\r\n<!-- \t\t\t<view class=\"whiteBlock\" v-show=\"whiteNumber>=4\" @click=\"whiteClick\"></view>\r\n -->\r\n\t\t</view>\r\n\r\n\t\t<!-- 写信窗口 -->\r\n\t\t<view class=\"blackBG\" :animation='blackBGData'></view>\r\n\t\t<!-- <textarea class='writeWin' v-model=\"textareaLS\" placeholder=\"请输入一个段落的文字\" maxlength=\"270\"\r\n\t\t\t:animation='textareaData' :show-confirm-bar='jianpanConfirm' style=\"\"/>\r\n\t\t<view class=\"confirmB\" :animation='confirmBData' @click=\"confirmF\">\r\n\t\t\t<view>完成</view>\r\n\t\t</view> -->\n\t\t<view class=\"writeWin\" :animation='textareaData'>\n\t\t\t<textarea class=\"mytextarea\" v-model=\"textareaLS\" placeholder=\"请输入文字 ٩( ๑╹ ꇴ╹)۶\" maxlength=\"270\" :focus=INPUTFLAG\n\t\t\t\t :show-confirm-bar='jianpanConfirm' style=\"\"/>\n\t\t\t<text class=\"iconfont\" style=\"color: #007AFF;\" @click=\"confirmF\">&#xe601;</text>\n\t\t</view>\n\t\t\r\n\r\n\t\t<!-- 悬浮按钮 -->\t\n\t\t<view v-if=\"xuanfuFlag\" class=\"xuanfuAnniu\">\n\t\t\t<text class=\"iconfont anniuCss\" style=\"margin-top: 24rpx;\" @click=\"addText\">&#xe646;</text>\n\t\t\t<text style=\"color: #fff;font-size: 32rpx;margin-bottom: 15rpx;\">文字</text>\n\t\t\t<text class=\"iconfont anniuCss\" style=\"\" @click=\"addPic\">&#xe689;</text>\n\t\t\t<text style=\"color: #fff;font-size: 32rpx;margin-bottom: 24rpx;\">图片</text>\n\t\t</view>\r\n\r\n\t\t<view v-if=\"sentFlag\" class=\"sent\">\r\n\t\t\t<text class=\"iconfont anniuCss\" @click=\"sentFunction\" style=\"margin-top: 24rpx;\">&#xe61e;</text>\n\t\t\t<text style=\"color: #fff;font-size: 32rpx;margin-bottom: 40rpx;\">发送</text>\r\n\t\t</view>\r\n\r\n\r\n\r\n\t</scroll-view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\r\n\t\t\t//蒙版动画实例\r\n\t\t\tvar animation_bg = uni.createAnimation({\r\n\t\t\t\ttransformOrigin: \"50% 50%\",\r\n\t\t\t\tduration: 200,\r\n\t\t\t\ttimingFunction: \"ease\",\r\n\t\t\t\tdelay: 0\r\n\t\t\t});\r\n\r\n\t\t\t//输入框动画实例\r\n\t\t\tvar animation_w = uni.createAnimation({\r\n\t\t\t\ttransformOrigin: \"50% 50%\",\r\n\t\t\t\tduration: 400,\r\n\t\t\t\ttimingFunction: \"ease\",\r\n\t\t\t\tdelay: 0\r\n\t\t\t});\r\n\r\n\t\t\t//完成按钮动画实例\r\n\t\t\tvar animation_c = uni.createAnimation({\r\n\t\t\t\ttransformOrigin: \"50% 50%\",\r\n\t\t\t\tduration: 100,\r\n\t\t\t\ttimingFunction: \"ease\",\r\n\t\t\t\tdelay: 0\r\n\t\t\t});\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcurrentTargetRef: '',\r\n\t\t\t\tanimation_bg, //黑色蒙版动画实例\r\n\t\t\t\tblackBGData: {}, //黑色蒙版动画数据\r\n\t\t\t\tanimation_w, //输入框动画实例\r\n\t\t\t\ttextareaData: {}, //输入框动画数据\n\t\t\t\tINPUTFLAG: false, //输入框的软键盘\r\n\t\t\t\tanimation_c, //完成按钮动画实例\r\n\t\t\t\tconfirmBData: {}, //完成按钮动画数据\r\n\t\t\t\tjianpanConfirm: false,\r\n\t\t\t\tfuck1content: '',\r\n\t\t\t\ttextareaLS: '', //输入框临时数据\r\n\t\t\t\t//模块对象列表\r\n\t\t\t\tblockObjectList: [\r\n\t\t\t\t],\r\n\t\t\t\taddTextFlag: true,//防止多次添加\r\n\t\t\t\taddPicFlag: true,\r\n\t\t\t\t//空白区域数量\r\n\t\t\t\twhiteNumber: 4,\r\n\t\t\t\taddFlag: true,\r\n\t\t\t\t\r\n\t\t\t\t// 信息\r\n\t\t\t\tsession: '',\r\n\t\t\t\tletterid: '',\n\t\t\t\tnowType: 0,\n\t\t\t\t\n\t\t\t\t//标题\n\t\t\t\tbiaoti: \"写信\",\r\n\t\t\t\t\n\t\t\t\t//悬浮按钮\n\t\t\t\tsentFlag: true,\n\t\t\t\txuanfuFlag: true,\n\t\t\t\t\n\t\t\t\t//块 锁\n\t\t\t\tblockclickclock: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 将信的内容上传到服务器，即块的信息以及对应的文件\r\n\t\t\tuploadletter: function(message, State, buttonclick){\r\n\t\t\t\tvar self = this\r\n\t\t\t\t\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: message\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t//先发送列表信息\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://afflatus.xyz/updateEmail',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsession: this.session,\r\n\t\t\t\t\t\tletterid: this.letterid,\r\n\t\t\t\t\t\tletterState: State,\r\n\t\t\t\t\t\tblockObjectList: this.blockObjectList\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: (res)=>{\r\n\t\t\t\t\t\t// 成功, 并跳回主页面\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif(res.data.status == 200){\r\n\t\t\t\t\t\t\t//发送非文本数据\r\n\t\t\t\t\t\t\t// var changeFlag = false\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar sum = 0\r\n\t\t\t\t\t\t\tvar success = 0\r\n\t\t\t\t\t\t\tvar timeid = null\r\n\t\t\t\t\t\t\t// 统计非文本，且内容发送改变的，且不是空的 块数\r\n\t\t\t\t\t\t\tfor(var item in self.blockObjectList){\r\n\t\t\t\t\t\t\t\tif(self.blockObjectList[item].type!='text' && self.blockObjectList[item].contentChange==1 && self.blockObjectList[item].content!=''){\r\n\t\t\t\t\t\t\t\t\tsum += 1\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 保证上面计算完后，再执行这个\r\n\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlet p = new Promise(function(reslove, reject){\r\n\t\t\t\t\t\t\t\t\tfor(var item in self.blockObjectList){\r\n\t\t\t\t\t\t\t\t\t\tif(self.blockObjectList[item].type!='text' && self.blockObjectList[item].contentChange==1 && self.blockObjectList[item].content!=''){ \r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: 'https://afflatus.xyz/uploadFile',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfilePath:self.blockObjectList[item].content,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: 'file',//文件对应的 key , 开发者在服务器端通过这个 key 可以获取到文件二进制内容\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsession: self.session,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tletterid: self.letterid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tblockid: self.blockObjectList[item].id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tblockType: self.blockObjectList[item].blockType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(res){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet newres = JSON.parse(res.data)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(newres.status == 200){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess += 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('ooooooooo')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treject('上传失败')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('hhhhhhhh')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treject('上传失败')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// 上传时间的最多这样，否则报错。\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\treject('上传失败')\r\n\t\t\t\t\t\t\t\t\t}, 20*1000)\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// 如果上传完毕，则跳出(不能一直检测，会卡死的，所以这里采用了定时器)\r\n\t\t\t\t\t\t\t\t\ttimeid = setInterval(function(){\r\n\t\t\t\t\t\t\t\t\t\tif(sum==success){\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('成功上传')\r\n\t\t\t\t\t\t\t\t\t\t\treslove('成功上传')\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}, 100)\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tp.then((data)=>{\r\n\t\t\t\t\t\t\t\t\t// console.log('跳到主页')\r\n\t\t\t\t\t\t\t\t\tclearInterval(timeid)\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t//若是点了发送按钮\r\n\t\t\t\t\t\t\t\t\tif(buttonclick == 'sent'){\r\n\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t//若是点了返回按钮\r\n\t\t\t\t\t\t\t\t\telse if(buttonclick == 'return'){\r\n\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '../setemail/setemail?session=' + self.session + '&haveSave=' + 'true' + '&letterid=' + self.letterid\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t},(err)=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log('这里啊')\r\n\t\t\t\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '服务器较忙',\n\t\t\t\t\t\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t// return false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, 10)\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 失败，服务器较忙\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tconsole.log('ffffff')\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '服务器较忙',\n\t\t\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(){\r\n\t\t\t\t\t\tconsole.log('kkkkkkk')\r\n\t\t\t\t\t\t// 失败，服务器较忙\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '服务器较忙',\n\t\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t// 返回封面的编辑页\r\n\t\t\treturnIndex: function(){\n\t\t\t\tif(this.blockclickclock){\n\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\turl: '../setemail/setemail?session=' + this.session + '&haveSave=' + 'true' + '&letterid=' + this.letterid + '&nowType=' + this.nowType\n\t\t\t\t\t})\n\t\t\t\t\treturn 0\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tvar self = this\r\n\t\t\t\tthis.uploadletter('保存中...', 0, 'return')\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//点击模块触发事件\r\n\t\t\teditFunction: function(e) {\r\n\t\t\t\t// console.log(\"父： 我点击了子。\")\r\n\t\t\t\tif(this.blockclickclock){// 已揽件的信件\n\t\t\t\t\tconsole.log(\"父： 我点击了子。\")\n\t\t\t\t\t// 若块是图片, 则打开图片预览\n\t\t\t\t\tif(this.$refs[e.currentTarget.dataset.ref][0].blockType == 'picture'){\n\t\t\t\t\t\t// console.log(this.$refs[e.currentTarget.dataset.ref][0].BlockContent)\n\t\t\t\t\t\tuni.previewImage({\n\t\t\t\t\t\t\turls: [this.$refs[e.currentTarget.dataset.ref][0].BlockContent]\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn 0\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\r\n\t\t\t\t//获取块的ref, 获得聚焦\r\n\t\t\t\tlet lastRef = this.currentTargetRef\r\n\t\t\t\tthis.currentTargetRef = e.currentTarget.dataset.ref;\r\n\r\n\t\t\t\t//取消上次的聚焦\r\n\t\t\t\tif (lastRef != '' && lastRef != this.currentTargetRef)\r\n\t\t\t\t\tthis.$refs[lastRef][0].returnBack();\r\n\r\n\t\t\t\t//点击编辑\r\n\t\t\t\tif (this.$refs[this.currentTargetRef][0].model == 'edit') {\r\n\t\t\t\t\t//开始编辑\r\n\t\t\t\t\t// console.log('父：开始编辑' + this.currentTargetRef)\r\n\t\t\t\t\tif(this.$refs[this.currentTargetRef][0].blockType == 'text'){\r\n\t\t\t\t\t\t//赋予输入框内容\r\n\t\t\t\t\t\tlet i = 0\r\n\t\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\t\tif (this.blockObjectList[i]['ref'] == this.currentTargetRef) {\r\n\t\t\t\t\t\t\t\tthis.textareaLS = this.blockObjectList[i]['content'];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ti += 1;\r\n\t\t\t\t\t\t\tif (i >= this.blockObjectList.length)\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//黑色蒙版弹出\r\n\t\t\t\t\t\tthis.animation_bg.height('100%')\r\n\t\t\t\t\t\tthis.animation_bg.width('100%')\r\n\t\t\t\t\t\tthis.animation_bg.left('0px')\r\n\t\t\t\t\t\tthis.animation_bg.top('0px')\r\n\t\t\t\t\t\tthis.animation_bg.opacity(0.7)\r\n\t\t\t\t\t\tthis.animation_bg.step()\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//输入框弹出\r\n\t\t\t\t\t\tthis.animation_w.width('700rpx')\r\n\t\t\t\t\t\tthis.animation_w.height('30%')\r\n\t\t\t\t\t\tthis.animation_w.opacity(0.7)\r\n\t\t\t\t\t\tthis.animation_w.left('9px')\r\n\t\t\t\t\t\tthis.animation_w.top('20%')\r\n\t\t\t\t\t\tthis.animation_w.step()\r\n\t\t\t\t\t\t//完成按钮弹出\r\n\t\t\t\t\t\tthis.animation_c.opacity(0.7)\r\n\t\t\t\t\t\tthis.animation_c.width('100rpx')\r\n\t\t\t\t\t\tthis.animation_c.height('100rpx')\r\n\t\t\t\t\t\tthis.animation_c.step()\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.blackBGData = this.animation_bg.export()\r\n\t\t\t\t\t\tthis.textareaData = this.animation_w.export()\r\n\t\t\t\t\t\tthis.confirmBData = this.animation_c.export()\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.INPUTFLAG = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 编辑图片时\r\n\t\t\t\t\telse if(this.$refs[this.currentTargetRef][0].blockType == 'picture'){\r\n\t\t\t\t\t\tvar self = this;\r\n\t\t\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t// 判断格式是否正确(jpg,jpeg,png), 否则报错\n\t\t\t\t\t\t\t\tlet fileType = res.tempFilePaths[0].split('.')\n\t\t\t\t\t\t\t\tfileType = fileType[fileType.length-1]\n\t\t\t\t\t\t\t\tif(fileType=='jpg' || fileType=='png' || fileType=='jpeg' || fileType=='gif'\n\t\t\t\t\t\t\t\t\t|| fileType=='JPG' || fileType=='PNG' || fileType=='JPEG' || fileType=='GIF'){\n\t\t\t\t\t\t\t\t\t// else 格式正确后, 检查文件大小, 若图片超过5M, 文件需要压缩, 直到压缩到小于5M.\n\t\t\t\t\t\t\t\t\t// quality属性 = 100 - [ (原文件大小-5M)/原文件大小 ]*100 - 4\n\t\t\t\t\t\t\t\t\t// 这里的10是少压缩一点.\n\t\t\t\t\t\t\t\t\tif(res.tempFiles[0].size > 5242880){//5*1024*1024 B\n\t\t\t\t\t\t\t\t\t\tlet quality = 100 - ((res.tempFiles[0].size - 5242880)/res.tempFiles[0].size)*100\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"quality\")\n\t\t\t\t\t\t\t\t\t\tconsole.log(quality)\n\t\t\t\t\t\t\t\t\t\tuni.compressImage({\n\t\t\t\t\t\t\t\t\t\t\tsrc: res.tempFilePaths[0],\n\t\t\t\t\t\t\t\t\t\t\tquality: quality,\n\t\t\t\t\t\t\t\t\t\t\tsuccess(e) {\n\t\t\t\t\t\t\t\t\t\t\t\tself.houchuliPic(e.tempFilePath)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tself.houchuliPic(res.tempFilePaths[0])\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '不支持的格式',\n\t\t\t\t\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//点击删除\r\n\t\t\t\telse if (this.$refs[this.currentTargetRef][0].model == 'delete'){\t\t\t\t\t\r\n\t\t\t\t\tvar i = 0\r\n\t\t\t\t\twhile(true){\r\n\t\t\t\t\t\tif(this.blockObjectList[i].ref == this.currentTargetRef){\r\n\t\t\t\t\t\t\tthis.$refs[this.currentTargetRef][0].returnBack();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar j = i+1\r\n\t\t\t\t\t\t\twhile(true){\r\n\t\t\t\t\t\t\t\tif(j>this.blockObjectList.length-1){\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.blockObjectList[j].orderNum -= 1;\r\n\t\t\t\t\t\t\t\tthis.blockObjectList[j].orderChange = 1;\r\n\t\t\t\t\t\t\t\tj += 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// delete this.blockObjectList[i] //删除的元素NUll了，没有改变原来数组\r\n\t\t\t\t\t\t\tthis.blockObjectList.splice(i,1) //改变数组大小\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ti += 1\r\n\t\t\t\t\t\tif(i>this.blockObjectList.length-1){\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.currentTargetRef = '';\r\n\t\t\t\t}\r\n\t\t\t\t//点击上移\r\n\t\t\t\telse if(this.$refs[this.currentTargetRef][0].model == 'shangMove'){\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar i = 0\r\n\t\t\t\t\twhile(true){\r\n\t\t\t\t\t\tif(this.blockObjectList[i].ref == this.currentTargetRef){\r\n\t\t\t\t\t\t\tif(i==0)\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.$refs[this.currentTargetRef][0].returnBack();\r\n\t\t\t\t\t\t\t//获取上个元素的对象\r\n\t\t\t\t\t\t\tvar lastObj = this.blockObjectList[i-1];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.blockObjectList[i-1].orderChange = 1;\r\n\t\t\t\t\t\t\tthis.blockObjectList[i].orderChange = 1;\r\n\t\t\t\t\t\t\tthis.blockObjectList[i-1].orderNum += 1;\r\n\t\t\t\t\t\t\tthis.blockObjectList[i].orderNum -= 1;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//取代上个元素\r\n\t\t\t\t\t\t\tthis.blockObjectList.splice(i-1, 1, this.blockObjectList[i]);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//取代当前元素\r\n\t\t\t\t\t\t\tthis.blockObjectList.splice(i, 1, lastObj);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ti += 1\r\n\t\t\t\t\t\tif(i>this.blockObjectList.length-1){\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//点击下移\r\n\t\t\t\telse if(this.$refs[this.currentTargetRef][0].model == 'xiaMove'){\r\n\t\t\t\t\tvar i = 0\r\n\t\t\t\t\twhile(true){\r\n\t\t\t\t\t\tif(this.blockObjectList[i].ref == this.currentTargetRef){\r\n\t\t\t\t\t\t\tif(i==this.blockObjectList.length-1)\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.$refs[this.currentTargetRef][0].returnBack();\r\n\t\t\t\t\t\t\t//获取下个元素的对象\r\n\t\t\t\t\t\t\tvar lastObj = this.blockObjectList[i+1];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.blockObjectList[i+1].orderChange = 1;\r\n\t\t\t\t\t\t\tthis.blockObjectList[i].orderChange = 1;\r\n\t\t\t\t\t\t\tthis.blockObjectList[i+1].orderNum -= 1;\r\n\t\t\t\t\t\t\tthis.blockObjectList[i].orderNum += 1;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//取代下个元素\r\n\t\t\t\t\t\t\tthis.blockObjectList.splice(i+1, 1, this.blockObjectList[i]);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//取代当前元素\r\n\t\t\t\t\t\t\tthis.blockObjectList.splice(i, 1, lastObj);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ti += 1\r\n\t\t\t\t\t\tif(i>this.blockObjectList.length-1){\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\n\t\t\t// 选好图片或压缩完后的 后处理\n\t\t\thouchuliPic: function(path){\n\t\t\t\t//更新块信息\n\t\t\t\tvar self = this\n\t\t\t\tlet i = 0\n\t\t\t\tconsole.log(path)\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (self.blockObjectList[i]['ref'] == self.currentTargetRef) {\n\t\t\t\t\t\tlet j = i\n\t\t\t\t\t\tconsole.log('hello')\n\t\t\t\t\t\t//保存到本地\n\t\t\t\t\t\tuni.saveFile({\n\t\t\t\t\t\t\ttempFilePath: path,\n\t\t\t\t\t\t\tsuccess: function(res){\n\t\t\t\t\t\t\t\t// console.log(res.savedFilePath)\n\t\t\t\t\t\t\t\t// console.log(self.blockObjectList)\n\t\t\t\t\t\t\t\tconsole.log('已保存')\n\t\t\t\t\t\t\t\tconsole.log(path)\n\t\t\t\t\t\t\t\tself.blockObjectList[j]['content'] = res.savedFilePath;\n\t\t\t\t\t\t\t\t//是否更改\n\t\t\t\t\t\t\t\tif(self.blockObjectList[j]['content'] != self.blockObjectList[j]['contentLast']){\n\t\t\t\t\t\t\t\t\tself.blockObjectList[j]['contentChange'] = 1\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tself.blockObjectList[j]['contentChange'] = 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ti = self.blockObjectList.length\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\ti += 1;\n\t\t\t\t\tif (i >= self.blockObjectList.length)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tself.$refs[self.currentTargetRef][0].model = ''\n\t\t\t\t\n\t\t\t},\n\t\t\t\r\n\t\t\t// 文字编辑时，点击完成按钮触发事件\r\n\t\t\tconfirmF: function() {\r\n\t\t\t\t// console.log('haha')\n\t\t\t\tthis.INPUTFLAG = false\r\n\t\t\t\t//黑色蒙版弹出\r\n\t\t\t\tthis.animation_bg.height('0rpx')\r\n\t\t\t\tthis.animation_bg.width('0rpx')\r\n\t\t\t\tthis.animation_bg.left('375rpx')\r\n\t\t\t\tthis.animation_bg.top('375rpx')\r\n\t\t\t\tthis.animation_bg.opacity(0)\r\n\t\t\t\tthis.animation_bg.step()\r\n\t\t\t\t//输入框弹出\r\n\t\t\t\tthis.animation_w.width('0rpx')\r\n\t\t\t\tthis.animation_w.height('0rpx')\r\n\t\t\t\tthis.animation_w.opacity(0)\r\n\t\t\t\tthis.animation_w.left('375rpx')\r\n\t\t\t\tthis.animation_w.top('375rpx')\r\n\t\t\t\tthis.animation_w.step()\r\n\t\t\t\t//完成按钮弹出\r\n\t\t\t\tthis.animation_c.opacity(0.7)\r\n\t\t\t\tthis.animation_c.width('0rpx')\r\n\t\t\t\tthis.animation_c.height('0rpx')\r\n\t\t\t\tthis.animation_c.step()\r\n\r\n\t\t\t\tthis.blackBGData = this.animation_bg.export()\r\n\t\t\t\tthis.textareaData = this.animation_w.export()\r\n\t\t\t\tthis.confirmBData = this.animation_c.export()\r\n\r\n\t\t\t\t//编辑完成\r\n\t\t\t\t//更新模块内容\r\n\t\t\t\tlet i = 0\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (this.blockObjectList[i]['ref'] == this.currentTargetRef) {\r\n\t\t\t\t\t\tthis.blockObjectList[i]['content'] = this.textareaLS;\r\n\t\t\t\t\t\tif(this.blockObjectList[i]['content'] != this.blockObjectList[i]['contentLast']){\r\n\t\t\t\t\t\t\tthis.blockObjectList[i]['contentChange'] = 1\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.blockObjectList[i]['contentChange'] = 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti += 1;\r\n\t\t\t\t\tif (i >= this.blockObjectList.length)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs[this.currentTargetRef][0].model = ''\r\n\t\t\t},\r\n\r\n\t\t\t// 点击空白区域\r\n\t\t\twhiteClick: function() {\n\t\t\t\tif(this.blockclickclock){\n\t\t\t\t\treturn 0\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this.blockObjectList)\r\n\t\t\t\t\r\n\t\t\t\t//选中的块失去聚焦\r\n\t\t\t\tif (this.currentTargetRef != '') {\r\n\t\t\t\t\tthis.$refs[this.currentTargetRef][0].model = ''\r\n\t\t\t\t\tthis.$refs[this.currentTargetRef][0].returnBack();\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//添加文字\r\n\t\t\taddText: function(){\r\n\t\t\t\t\r\n\t\t\t\tif(this.addFlag){\r\n\t\t\t\t\tthis.addFlag = false\r\n\t\t\t\t\t\r\n\t\t\t\t\t//新建唯一ID以及Ref\r\n\t\t\t\t\tvar date = new Date()\r\n\t\t\t\t\tvar year = date.getFullYear()//年\r\n\t\t\t\t\tvar month = date.getMonth() + 1 //月\r\n\t\t\t\t\tvar day = date.getDate() //日\r\n\t\t\t\t\tvar hour = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()//时\r\n\t\t\t\t\tvar minute = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()//分\r\n\t\t\t\t\tvar second = date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds() //秒\r\n\t\t\t\t\tmonth >= 1 && month <= 9 ? (month = \"0\" + month) : \"\"\r\n\t\t\t\t\tday >= 0 && day <= 9 ? (day = \"0\" + day) : \"\";\r\n\t\t\t\t\thour >= 0 && hour <= 9 ? (hour = \"0\" + hour) : \"\";\r\n\t\t\t\t\tminute >= 0 && minute <= 9 ? (minute = \"0\" + minute) : \"\";\r\n\t\t\t\t\tsecond >= 0 && second <= 9 ? (second = \"0\" + second) : \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar id = String(year)+String(month)+String(day)+String(hour)+String(minute)+String(second);\r\n\t\t\t\t\tvar ref = id\r\n\t\t\t\t\t\r\n\t\t\t\t\t//push到数组\r\n\t\t\t\t\tthis.blockObjectList.push({\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tref,\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tblockType: 0,\r\n\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\tcontentLast: '',\r\n\t\t\t\t\t\tcontentChange: 1, \r\n\t\t\t\t\t\torderNum: -1,\r\n\t\t\t\t\t\torderChange: 1,\r\n\t\t\t\t\t\tnewblock: true, \r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 分配orderNum\r\n\t\t\t\t\tthis.blockObjectList[this.blockObjectList.length-1].orderNum = this.blockObjectList.length\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tthis.addFlag = true\r\n\t\t\t\t\t},1100)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 添加图片\r\n\t\t\taddPic: function(){\r\n\t\t\t\tif(this.addFlag){\r\n\t\t\t\t\tthis.addFlag = false\r\n\t\t\t\t\t\r\n\t\t\t\t\t//新建唯一ID以及Ref\r\n\t\t\t\t\tvar date = new Date()\r\n\t\t\t\t\tvar year = date.getFullYear()//年\r\n\t\t\t\t\tvar month = date.getMonth() + 1 //月\r\n\t\t\t\t\tvar day = date.getDate() //日\r\n\t\t\t\t\tvar hour = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()//时\r\n\t\t\t\t\tvar minute = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()//分\r\n\t\t\t\t\tvar second = date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds() //秒\r\n\t\t\t\t\tmonth >= 1 && month <= 9 ? (month = \"0\" + month) : \"\"\r\n\t\t\t\t\tday >= 0 && day <= 9 ? (day = \"0\" + day) : \"\";\r\n\t\t\t\t\thour >= 0 && hour <= 9 ? (hour = \"0\" + hour) : \"\";\r\n\t\t\t\t\tminute >= 0 && minute <= 9 ? (minute = \"0\" + minute) : \"\";\r\n\t\t\t\t\tsecond >= 0 && second <= 9 ? (second = \"0\" + second) : \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar id = String(year)+String(month)+String(day)+String(hour)+String(minute)+String(second);\r\n\t\t\t\t\tvar ref = id\r\n\t\t\t\t\t\r\n\t\t\t\t\t//push到数组\r\n\t\t\t\t\tthis.blockObjectList.push({\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tref,\r\n\t\t\t\t\t\ttype: 'picture',\r\n\t\t\t\t\t\tblockType: 1,\r\n\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\tcontentLast: '',\r\n\t\t\t\t\t\tcontentChange: 1,\r\n\t\t\t\t\t\torderNum: -1,\r\n\t\t\t\t\t\torderChange: 1,\r\n\t\t\t\t\t\tnewblock: true, \r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 分配orderNum\r\n\t\t\t\t\tthis.blockObjectList[this.blockObjectList.length-1].orderNum = this.blockObjectList.length\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tthis.addFlag = true\r\n\t\t\t\t\t},1100)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 发送信息\r\n\t\t\tsentFunction: function(){\r\n\t\t\t\tvar self = this\n\t\t\t\t\n\t\t\t\tuni.requestSubscribeMessage({\n\t\t\t\t\ttmplIds: ['Ue2gQHM_jKb-Z6iPwGAf69NkkURm-IqmjadGqrLgtOk'],\n\t\t\t\t\tsuccess(res){\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(JSON.stringify(res).indexOf('accept') != -1){// 同意订阅通知\n\t\t\t\t\t\t\t// 是否达到发送条件(图片块的数量, 音频块的数量，文字块的数量)\n\t\t\t\t\t\t\tif(self.blockObjectList.length < 1){\n\t\t\t\t\t\t\t\t// console.log('内容至少一个块')\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '无内容无法发送',\n\t\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: \"发送邮件\",\n\t\t\t\t\t\t\t\t\tcontent: \"发送后将无法编辑\",\n\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\tif (res.confirm){\n\t\t\t\t\t\t\t\t\t\t\tself.uploadletter('发送中...', 1, 'sent')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{// 不同意订阅通知\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '请允许邮件提醒',\n\t\t\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\r\n\t\t\t\t// console.log(typeof this.blockObjectList)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonLoad(data) {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"加载中\"\n\t\t\t})\n\t\t\t\r\n\t\t\tvar self = this\r\n\t\t\t//若当前页面不是新建，而是编辑草稿，需要加载信封内容（通过当前函数获取上一个页面传的参来判断）\r\n\t\t\tthis.session = data.session\r\n\t\t\tthis.letterid = data.letterid\n\t\t\tif(data.nowType == 2){\n\t\t\t\tthis.nowType = 2\n\t\t\t\tthis.biaoti = \"信件内容\"\n\t\t\t\tthis.sentFlag = false\n\t\t\t\tthis.xuanfuFlag = false\n\t\t\t\tthis.blockclickclock = true\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//获取blockObjectList\r\n\t\t\tvar blockObjectList_bb = []\r\n\t\t\tuni.request({\r\n\t\t\t\turl: 'https://afflatus.xyz/loadLetter',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsession: this.session,\r\n\t\t\t\t\tletterid: this.letterid\r\n\t\t\t\t},\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.status == 200){\r\n\t\t\t\t\t\tblockObjectList_bb = res.data.data;\r\n\t\t\t\t\t\tconsole.log(blockObjectList_bb)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar tmpblockObjectList = new Array(blockObjectList_bb.length)\r\n\t\t\t\t\t\tvar timeid = null\r\n\t\t\t\t\t\tvar sum = blockObjectList_bb.length\r\n\t\t\t\t\t\tvar success = 0\r\n\t\t\t\t\t\t// 预处理，即添加其它变量在各个元素上\r\n\t\t\t\t\t\tvar aPromise = new Promise(function(reslove, reject){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetTimeout(function(){ // 上传时间的最多这样，否则报错。\r\n\t\t\t\t\t\t\t\treject('加载失败')\r\n\t\t\t\t\t\t\t}, 20*1000)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttimeid = setInterval(function(){\r\n\t\t\t\t\t\t\t\tif(sum==success){\r\n\t\t\t\t\t\t\t\t\tconsole.log('加载成功')\r\n\t\t\t\t\t\t\t\t\treslove('加载成功')\r\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsole.log(\"sum:\"+sum+\" success:\"+success)\r\n\t\t\t\t\t\t\t}, 1000)\t//100\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar arr = []\r\n\t\t\t\t\t\t\tfor(var n in blockObjectList_bb){\r\n\t\t\t\t\t\t\t\tarr[n] = Number(n)\r\n\t\t\t\t\t\t\t}\r\n\t\n\t\t\t\t\t\t\t// 对每个元素重新给值\r\n\t\t\t\t\t\t\tblockObjectList_bb.forEach(function(item){\r\n\t\t\t\t\t\t\t\tlet blockObject = {\r\n\t\t\t\t\t\t\t\t\tid:'',\r\n\t\t\t\t\t\t\t\t\tref:'',\r\n\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\tblockType: 0,\r\n\t\t\t\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\t\t\t\tcontentLast: '',\r\n\t\t\t\t\t\t\t\t\tcontentChange: 0, \r\n\t\t\t\t\t\t\t\t\torderNum: -1,\r\n\t\t\t\t\t\t\t\t\torderChange: 1,\r\n\t\t\t\t\t\t\t\t\tnewblock: true, \r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tblockObject['id'] = item.blockid\r\n\t\t\t\t\t\t\t\tblockObject['ref'] = item.blockid\r\n\t\t\t\t\t\t\t\tblockObject['blockType'] = item.blockType\r\n\t\t\t\t\t\t\t\tblockObject['orderNum'] = item.orderNum\r\n\t\t\t\t\t\t\t\tif(item.blockType == 0){\r\n\t\t\t\t\t\t\t\t\tblockObject['type'] = 'text'\r\n\t\t\t\t\t\t\t\t}else if(item.blockType == 1){\r\n\t\t\t\t\t\t\t\t\tblockObject['type'] = 'picture'\r\n\t\t\t\t\t\t\t\t}else if(item.blockType == 2){\r\n\t\t\t\t\t\t\t\t\tblockObject['type'] = 'music'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tblockObject['orderChange'] = 0\r\n\t\t\t\t\t\t\t\tblockObject['newblock'] = false\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(blockObject['blockType'] == 0){//文本资源直接获取\r\n\t\t\t\t\t\t\t\t\tblockObject['content'] = item.content\r\n\t\t\t\t\t\t\t\t\tblockObject['contentLast'] = blockObject['content']\r\n\t\t\t\t\t\t\t\t\ttmpblockObjectList[blockObject['orderNum']-1] = blockObject\r\n\t\t\t\t\t\t\t\t\tsuccess += 1\r\n\t\t\t\t\t\t\t\t\t// tmpblockObjectList.push(blockObject)\r\n\t\t\t\t\t\t\t\t}else{//非文本资源\r\n\t\t\t\t\t\t\t\t\t// console.log('我进来了、喔')\r\n\t\t\t\t\t\t\t\t\tblockObject['content'] = item.content\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif(blockObject['content'] != ''){\r\n\t\t\t\t\t\t\t\t\t\t//查看资源在本地是否存在\r\n\t\t\t\t\t\t\t\t\t\tuni.getSavedFileInfo({\r\n\t\t\t\t\t\t\t\t\t\t\tfilePath: blockObject['content'],\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttmpblockObjectList[blockObject['orderNum']-1] = blockObject\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess += 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t// tmpblockObjectList.push(blockObject)\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tfail() {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"地资源找不到，需要下载\")\n\t\t\t\t\t\t\t\t\t\t\t\t//若本地资源找不到，则需要下载\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: 'https://afflatus.xyz/download',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsession: self.session,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tletterid: self.letterid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tblockid: item.blockid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tblockType: String(item.blockType)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(res.statusCode === 200){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('下载成功')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// blockObject['content'] = res.tempFilePath\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// blockObject['contentLast'] = blockObject['content']\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// success += 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// tmpblockObjectList[blockObject['orderNum']-1] = blockObject\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//将资源保存到本地\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet mytempFilePath = res.tempFilePath\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"res.tempFilePath = \" + res.tempFilePath)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.saveFile({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttempFilePath: mytempFilePath,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"保存路径为: \" + res.savedFilePath)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tblockObject['content'] = res.savedFilePath\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tblockObject['contentLast'] = blockObject['content']\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess += 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttmpblockObjectList[blockObject['orderNum']-1] = blockObject\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//更新服务器的图片路径\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: 'https://afflatus.xyz/updatePath',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsession: self.session,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tletterid: self.letterid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tblockid: item.blockid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangecontent: res.savedFilePath\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('更新成功啊')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfail(e) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('更新失败 :' + e)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfail(e) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"不能保存\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"mytempFilePath=\" + mytempFilePath)\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(e)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('下载失败 ' + e)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tblockObject['contentLast'] = blockObject['content']\r\n\t\t\t\t\t\t\t\t\t\ttmpblockObjectList[blockObject['orderNum']-1] = blockObject\r\n\t\t\t\t\t\t\t\t\t\tsuccess += 1\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\taPromise.then((data)=>{\r\n\t\t\t\t\t\t\tclearInterval(timeid)\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.blockObjectList = tmpblockObjectList\n\t\t\t\t\t\t\tconsole.log(tmpblockObjectList)\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\n\t\t\t\t\t\t},(err)=>{\r\n\t\t\t\t\t\t\tclearInterval(timeid)\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '服务器较忙',\n\t\t\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tfail() {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n// this.blockObjectList.push({\r\n// \t\t\t\t\t\tid,\r\n// \t\t\t\t\t\tref,\r\n// \t\t\t\t\t\ttype: 'text',\r\n// \t\t\t\t\t\tblockType: 0,\r\n// \t\t\t\t\t\tcontent: '',\r\n// \t\t\t\t\t\tcontentLast: '',\r\n// \t\t\t\t\t\tcontentChange: 1, \r\n// \t\t\t\t\t\torderNum: -1,\r\n// \t\t\t\t\t\torderChange: 1,\r\n// \t\t\t\t\t\tnewblock: true, \r\n// \t\t\t\t\t})\t\t\t\r\n\t\t\t// this.haveSave = data.haveSave == \"true\"\r\n\t\t\t\r\n\t\t\t// 获取user session相关信息\r\n// url: '../writeemail/writeemail?' + 'session=' + self.session + '&letterid=' + self.letterid\r\n\t\t\t// 读lettetid里的数据\r\n\t\t\t\r\n\t\t\t\t// 用户信息过时，则跳回登录页面\r\n\t\t\t\r\n\t\t\t\t// 成功\r\n\t\t\t\t\t// 计算需要多少个空白区域\r\n\t\t\t\t\t// this.whiteNumber = 4 - this.blockObjectList.length\r\n\t\t},\r\n\t\t\r\n\t\r\n\t}\r\n</script>\r\n\r\n<style lang='scss'>\r\n\t.writeemail {\r\n\t\tposition: relative;\n\t\ttop: 0rpx;\n\t\tleft: 0rpx;\n\t\twidth: 100%;\n\t\t/* height: 100%; */\n\t\t/* background-image: linear-gradient(62deg, #8EC5FC, #E0C3FC); */\r\n\t}\n\t\n\t.writeemail .xuanfuAnniu{\n\t\tposition: fixed;\n\t\tdisplay: flex;\n\t\tbottom: 70rpx;\n\t\tleft: 16rpx;\n\t\twidth: 95rpx;\n\t\theight: 290rpx;\n\t\t/* z-index: 1; */\n\t\tbackground-color: rgba(0, 0, 0, 0.1);\n\t\tborder-radius: 95rpx;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex-wrap: wrap;\n\t\tbox-shadow: 3px 6px 12px #888888;\n\t}\n\t\n\t.writeemail .anniuCss{\n\t\tcolor: #fff;\n\t\tfont-size: 72rpx;\n\t}\n\t\n\t.writeemail .sent {\n\t\tposition: fixed;\n\t\tdisplay: flex;\n\t\tbottom: 77rpx;\n\t\tright: 16rpx;\n\t\twidth: 95rpx;\n\t\theight: 164rpx;\n\t\tbackground-color: rgba(0, 0, 0, 0.1);\n\t\tborder-radius: 95rpx;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex-wrap: wrap;\n\t\tbox-shadow: 3px 6px 12px #888888;\n\t}\n\t\n\t.writeemail .bg{\n\t\tposition: fixed;\n\t\ttop: 0rpx;\n\t\tleft: 0rpx;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground-image: linear-gradient(62deg, #8EC5FC, #E0C3FC);\n\t}\n\t\r\n\t.writeemail .myNavigationBG{\r\n\t\theight: 130rpx;\r\n\t\twidth: 100%;\r\n\t\topacity: 0.6;\r\n\t}\r\n\t\r\n\t.writeemail .back-btn {\r\n\t\t\twidth: 100%;\r\n\t\t\tposition: fixed;\r\n\t\t\tz-index: 8;\r\n\t\t\tpadding-top: var(--status-bar-height);\r\n\t\t\tpadding-left: 40rpx;\r\n\t\t\tpadding-right: 40rpx;\n\t\t\tpadding-bottom: 25rpx;\r\n\t\t\t/* top: 40rpx; */\n\t\t\theight: 99rpx;\r\n\t\t\tfont-size: 40rpx;\r\n\t\t\tcolor: #1E1E1E;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\n\t\t\tbackground-color: rgba(0,0,0,0.1);\n\t\t\t/* box-shadow: 1px 1px 22px #707070; */\r\n\t\t\t.nav-title {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 103rpx;\r\n\t\t\t\twidth: 640rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\n\t\t\t\r\n\t}\r\n\t\r\n\t.writeemail scroll-view{\n\t\tposition: absolute;\n\t\ttop: 125rpx;\r\n\t\tpadding-top: var(--status-bar-height);\r\n\t}\r\n\t\r\n\t.writeemail .myNavigation{\r\n\t\tposition: fixed;\r\n\t\tleft: 0rpx;\r\n\t\ttop: 0rpx;\r\n\t\theight: 130rpx;\r\n\t\twidth: 100%;\r\n\t\tz-index: 5;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\topacity: 0.6;\r\n\t}\r\n\r\n\r\n\r\n\t.writeemail .newText {\r\n\t\tposition: fixed;\r\n\t\tleft: 17.3rpx;\r\n\t\tbottom: 17.3rpx;\r\n\t\twidth: 76.92rpx;\r\n\t\theight: 76.92rpx;\r\n\t\tborder-radius: 76.92rpx;\r\n\t\tborder: #000000 solid 1.92rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.writeemail .newText view {\r\n\t\tfont-size: 30.15rpx;\r\n\t\tmargin-top: 18.885rpx\r\n\t}\r\n\r\n\t.writeemail .newPic {\r\n\t\tposition: fixed;\r\n\t\tleft: 17.3rpx;\r\n\t\tbottom: 107.69rpx;\r\n\t\twidth: 76.92rpx;\r\n\t\theight: 76.92rpx;\r\n\t\tborder-radius: 76.92rpx;\r\n\t\tborder: #000000 solid 1.92rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.writeemail .newPic view {\r\n\t\tfont-size: 30.15rpx;\r\n\t\tmargin-top: 18.885rpx\r\n\t}\r\n\r\n\t.writeemail .newMusic {\r\n\t\tposition: fixed;\r\n\t\tleft: 17.3rpx;\r\n\t\tbottom: 200rpx;\r\n\t\twidth: 76.92rpx;\r\n\t\theight: 76.92rpx;\r\n\t\tborder-radius: 76.92rpx;\r\n\t\tborder: #000000 solid 1.92rpx;\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #007AFF;\r\n\t}\r\n\r\n\t.writeemail .newMusic view {\r\n\t\tfont-size: 30.15rpx;\r\n\t\tmargin-top: 18.885rpx\r\n\t}\r\n\r\n\t.writeemail .blackBG {\r\n\t\tposition: fixed;\r\n\t\ttop: 375rpx;\r\n\t\tleft: 375rpx;\r\n\t\theight: 0rpx;\r\n\t\twidth: 0rpx;\r\n\t\tbackground-color: #000000;\r\n\t\topacity: 0;\r\n\t\tz-index: 9;\r\n\t}\r\n\r\n\t/* .writeemail textarea{\r\n\t\ttop: 200rpx !important; \r\n\t} */\r\n\r\n\t.writeemail .writeWin {\r\n\t\tposition: fixed;\n\t\tdisplay: flex;\r\n\t\tz-index: 12;\r\n\t\topacity: 0;\n\t\theight: 0rpx;\n\t\twidth: 0rpx;\r\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\t/* left: 375rpx; */\r\n\t}\n\t\n\t.writeemail .writeWin text{\n\t\tposition: absolute;\n\t\tright: 15rpx;\n\t\tbottom: 0rpx;\n\t\tfont-size: 100rpx;\n\t\topacity: 0.7;\n\t\tz-index: 12;\n\t}\n\t\n\t.writeemail .mytextarea{\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 30rpx;\n\t\tmargin: 9.61rpx 9.61rpx;\n\t\tfont-size: 40rpx;\n\t\tpadding-left: 10rpx;\n\t\tpadding-top: 10rpx;\n\t}\r\n\r\n\t.writeemail .confirmB {\r\n\t\tposition: fixed;\r\n\t\tz-index: 10;\r\n\t\ttop: 170rpx;\r\n\t\tright: 0rpx;\r\n\t\theight: 0rpx;\r\n\t\twidth: 0rpx;\r\n\t\topacity: 0;\r\n\t\tbackground-color: #fff;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.writeemail .confirmB view {\r\n\t\tpadding-top: 30rpx;\r\n\t}\n\t\n\t.writeemail textarea{\n\t\t/* width: 700rpx !important;\n\t\theight: 30% !important;;\n\t\tleft: 9px !important;; */\n\t}\r\n\r\n\t.writeemail .whiteBlock {\r\n\t\twidth: 100%;\n\t\tpadding-top: 80rpx;\n\t\t/* top: 40rpx; */\n\t\theight: 99rpx;\r\n\t}\r\n\t\r\n\t/* .writeemail .buttonReturn{\r\n\t\tposition: fixed;\r\n\t\ttop: 79rpx;\r\n\t\tleft: 0rpx;\r\n\t\tz-index: 8;\r\n\t} */\n\t\n\t.writeemail .buttonReturn{\n\t\tposition: absolute;\n\t\ttop: 85rpx;\n\t\tleft: 28rpx;\n\t\tz-index: 10;\n\t\tfont-size: 70rpx;\n\t\topacity: 0.9;\n\t}\n\t\n\r\n</style>\n","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./writeemail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./writeemail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1644568729941\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}